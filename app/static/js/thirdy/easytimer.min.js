! function(n, t) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : n.Timer = t()
}(this, function() {
    "use strict";

    function n(n, t, e) {
        var o = void 0,
            i = "";
        for (o = 0; o < t; o += 1) i += String(e);
        return (i + n).slice(-i.length)
    }

    function t() {
        this.secondTenths = 0, this.seconds = 0, this.minutes = 0, this.hours = 0, this.days = 0, this.toString = function(t, e, o) {
            t = t || ["hours", "minutes", "seconds"], e = e || ":", o = o || 2;
            var i = [],
                r = void 0;
            for (r = 0; r < t.length; r += 1) void 0 !== this[t[r]] && i.push(n(this[t[r]], o, "0"));
            return i.join(e)
        }
    }

    function e() {
        return "undefined" != typeof document
    }

    function o() {
        return S
    }

    function i(n, t) {
        return (n % t + t) % t
    }
    var r = "undefined" != typeof window ? window.CustomEvent : void 0;
    "undefined" != typeof window && "function" != typeof r && ((r = function(n, t) {
        t = t || {
            bubbles: !1,
            cancelable: !1,
            detail: void 0
        };
        var e = document.createEvent("CustomEvent");
        return e.initCustomEvent(n, t.bubbles, t.cancelable, t.detail), e
    }).prototype = window.Event.prototype, window.CustomEvent = r);
    var s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(n) {
            return typeof n
        } : function(n) {
            return n && "function" == typeof Symbol && n.constructor === Symbol && n !== Symbol.prototype ? "symbol" : typeof n
        },
        u = 10,
        d = 60,
        c = 60,
        f = 24,
        a = 0,
        v = 1,
        h = 2,
        l = 3,
        p = 4,
        m = "secondTenths",
        y = "seconds",
        b = "minutes",
        w = "hours",
        g = "days",
        E = {
            secondTenths: 100,
            seconds: 1e3,
            minutes: 6e4,
            hours: 36e5,
            days: 864e5
        },
        T = {
            secondTenths: u,
            seconds: d,
            minutes: c,
            hours: f
        },
        S = "undefined" != typeof module && module.exports && "function" == typeof require ? require("events") : void 0;
    return function() {
        function n(n, t) {
            var e = Math.floor(t);
            X[n] = e, W[n] = n !== g ? i(e, T[n]) : e
        }

        function r(n) {
            return U(n, g)
        }

        function j(n) {
            return U(n, w)
        }

        function C(n) {
            return U(n, b)
        }

        function M(n) {
            return U(n, y)
        }

        function L(n) {
            return U(n, m)
        }

        function U(t, e) {
            var o = X[e];
            return n(e, t / E[e]), X[e] !== o
        }

        function V() {
            A(), z()
        }

        function A() {
            clearInterval(Y), Y = void 0, $ = !1, _ = !1
        }

        function k(n) {
            Q() ? (cn = D(), sn = F(rn.target)) : R(n), x()
        }

        function x() {
            var n = E[nn];
            O(q(Date.now())) || (Y = setInterval(P, n), $ = !0, _ = !1)
        }

        function D() {
            return q(Date.now()) - X.secondTenths * E[m] * tn
        }

        function P() {
            var n = q(Date.now()),
                t = tn > 0 ? n - cn : cn - n,
                e = {};
            e[m] = L(t), e[y] = M(t), e[b] = C(t), e[w] = j(t), e[g] = r(t), I(e), en(an.detail.timer), O(n) && (K("targetAchieved", an), J())
        }

        function q(n) {
            return Math.floor(n / E[nn]) * E[nn]
        }

        function I(n) {
            n[m] && K("secondTenthsUpdated", an), n[y] && K("secondsUpdated", an), n[b] && K("minutesUpdated", an), n[w] && K("hoursUpdated", an), n[g] && K("daysUpdated", an)
        }

        function O(n) {
            return sn instanceof Array && n >= fn
        }

        function z() {
            for (var n in W) W.hasOwnProperty(n) && "number" == typeof W[n] && (W[n] = 0);
            for (var t in X) X.hasOwnProperty(t) && "number" == typeof X[t] && (X[t] = 0)
        }

        function R(n) {
            nn = "string" == typeof(n = n || {}).precision ? n.precision : y, en = "function" == typeof n.callback ? n.callback : function() {}, dn = !0 === n.countdown, tn = !0 === dn ? -1 : 1, "object" === s(n.startValues) && G(n.startValues), cn = D(), "object" === s(n.target) ? sn = F(n.target) : dn && (n.target = {
                seconds: 0
            }, sn = F(n.target)), on = {
                precision: nn,
                callback: en,
                countdown: "object" === (void 0 === n ? "undefined" : s(n)) && !0 === n.countdown,
                target: sn,
                startValues: un
            }, rn = n
        }

        function B(n) {
            var t = void 0,
                e = void 0,
                o = void 0,
                i = void 0,
                r = void 0,
                m = void 0;
            if ("object" === (void 0 === n ? "undefined" : s(n)))
                if (n instanceof Array) {
                    if (5 !== n.length) throw new Error("Array size not valid");
                    m = n
                } else m = [n.secondTenths || 0, n.seconds || 0, n.minutes || 0, n.hours || 0, n.days || 0];
            for (var y = 0; y < n.length; y += 1) n[y] < 0 && (n[y] = 0);
            return t = m[a], e = m[v] + Math.floor(t / u), o = m[h] + Math.floor(e / d), i = m[l] + Math.floor(o / c), r = m[p] + Math.floor(i / f), m[a] = t % u, m[v] = e % d, m[h] = o % c, m[l] = i % f, m[p] = r, m
        }

        function F(n) {
            if (n) {
                var t = H(sn = B(n));
                return fn = cn + t.secondTenths * E[m] * tn, sn
            }
        }

        function G(n) {
            un = B(n), W.secondTenths = un[a], W.seconds = un[v], W.minutes = un[h], W.hours = un[l], W.days = un[p], X = H(un, X)
        }

        function H(n, t) {
            var e = t || {};
            return e.days = n[p], e.hours = e.days * f + n[l], e.minutes = e.hours * c + n[h], e.seconds = e.minutes * d + n[v], e.secondTenths = e.seconds * u + n[[a]], e
        }

        function J() {
            V(), K("stopped", an)
        }

        function K(n, t) {
            e() ? Z.dispatchEvent(new CustomEvent(n, t)) : o() && Z.emit(n, t)
        }

        function N() {
            return $
        }

        function Q() {
            return _
        }
        var W = new t,
            X = new t,
            Y = void 0,
            Z = e() ? document.createElement("span") : o() ? new S.EventEmitter : void 0,
            $ = !1,
            _ = !1,
            nn = void 0,
            tn = void 0,
            en = void 0,
            on = {},
            rn = void 0,
            sn = void 0,
            un = void 0,
            dn = void 0,
            cn = void 0,
            fn = void 0,
            an = {
                detail: {
                    timer: this
                }
            };
        void 0 !== this && (this.start = function(n) {
            N() || (k(n), K("started", an))
        }, this.pause = function() {
            A(), _ = !0, K("paused", an)
        }, this.stop = J, this.reset = function() {
            V(), k(rn), K("reset", an)
        }, this.isRunning = N, this.isPaused = Q, this.getTimeValues = function() {
            return W
        }, this.getTotalTimeValues = function() {
            return X
        }, this.getConfig = function() {
            return on
        }, this.addEventListener = function(n, t) {
            e() ? Z.addEventListener(n, t) : o() && Z.on(n, t)
        }, this.removeEventListener = function(n, t) {
            e() ? Z.removeEventListener(n, t) : o() && Z.removeListener(n, t)
        })
    }
});